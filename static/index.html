<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        td{
            border: 1px solid black;
            padding: 10px;
        }
    </style>
</head>
<body>

    <table id="all">
        <tr>
            <td>Kraj</td>
            <td>Nominał</td>
            <td>Nr. katalogowy</td>
            <td>Stop</td>
            <td>Rok</td>
            <td>Usuń</td>
            <td>Update</td>
        </tr>
    </table>

    <h2>Dodawanie rekordu</h2>
    <select id="kraj" name="kraj">
        <option value="pol">Polska</option>
        <option value="eng">Anglia</option>
        <option value="nig">Nigger</option>
    </select>
    <input id="nom" name="nom" type="text">
    <input id="nr" name="nr" type="number">
    <select id="stop" name="stop">
        <option value="al">Aluminium</option>
        <option value="br">Brąz</option>
        <option value="sv">Silver</option>
    </select>
    <input id="rok" name="rok" type="number">
    <input id="send" type="button" value="send">

    <script>
        document.getElementById("send").onclick = async () => {
            fetchPostAsync = async () => {

                const data = JSON.stringify({
                    kraj: document.getElementById("kraj").value,
                    nom: document.getElementById("nom").value,
                    nr: document.getElementById("nr").value,
                    stop: document.getElementById("stop").value,
                    rok: document.getElementById("rok").value
                })

                const options = {
                        method: "POST",
                        body: data,
                };

                let response = await fetch("/add", options)

                if (!response.ok)
                    return response.status
                else
                    return await response.json() // response.json

            }

            let w = await fetchPostAsync()
            addRecord(w)
        }

        addRecord = (w) =>{
         let tr = document.createElement("tr")
            let kraj = document.createElement("td")   
            let nom = document.createElement("td")   
            let nr = document.createElement("td")   
            let stop = document.createElement("td")   
            let rok = document.createElement("td")   

            kraj.innerText = w.kraj
            nom.innerText = w.nom
            nr.innerText = w.nr
            stop.innerText = w.stop
            rok.innerText = w.rok

            tr.appendChild(kraj)
            tr.appendChild(nom)
            tr.appendChild(nr)
            tr.appendChild(stop)
            tr.appendChild(rok)

            document.getElementById("all").appendChild(tr)
        }
    </script>

</body>
</html>